<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> jQuery AJAX 通信</title>

    <script type="text/javascript" src="imports/jQuery.js"></script>

    <script type="text/javascript">

//        jQuery在全局对象jQuery（也就是$）绑定了ajax()函数，可以处理AJAX请求。ajax(url, settings)函数需要接收一个URL和一个可选的settings对象，常用的选项如下：
//
//        async：是否异步执行AJAX请求，默认为true，千万不要指定为false；
//
//        method：发送的Method，缺省为'GET'，可指定为'POST'、'PUT'等；
//
//        contentType：发送POST请求的格式，默认值为'application/x-www-form-urlencoded; charset=UTF-8'，也可以指定为text/plain、application/json；
//
//        data：发送的数据，可以是字符串、数组或object。如果是GET请求，data将被转换成query附加到URL上，如果是POST请求，根据contentType把data序列化成合适的格式；
//
//        headers：发送的额外的HTTP头，必须是一个object；
//
//        dataType：接收的数据格式，可以指定为'html'、'xml'、'json'、'text'等，缺省情况下根据响应的Content-Type猜测。


        /*
        * $.ajax(URL, OPTIONS)
        * .done(funtion(data){
        *     //请求成功
        *     //对返回的对象进行处理...
        * })
        * .fail(funtion(){
        *     //请求失败
        *     //进行相应处理
        * })
        * .always(function(){
        *     //无论成功与否
        *     //都会执行的内容
        * });
        *
        *
        *
        *
        * */
        $(function(){

            function ajaxLog(data){
                var txt = $('#text');
                txt.val(txt.val()+'\n'+data);
            }

            var jQXHR = $.ajax('/Jstudy/html/jQuery/JSONS/xiaomingJSON.html',
                    {
                        dataType:'json'
                    }
            ).done(function(data){
                    //alert(data.constructor); //此时还是对象
                    ajaxLog("成功接收到消息 : "+JSON.stringify(data));
                        alert(data.name);//xiaoming
            }).fail(function(xhr,status){
                    ajaxLog("失败 : "+xhr.status+", 原因 : "+status);
            }).always(function(){
                    ajaxLog("请求完成 : no matter if it successes....");
             });


        });




    </script>
</head>
<body>

    <textarea id = "text" style="height:500px ;width: 600px">返回结果</textarea>
</body>
</html>